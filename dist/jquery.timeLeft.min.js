/* timeLeft v0.9.3 <github.com/fiedlr/timeLeft> | (c) 2016 Adam Fiedler | @license <opensource.org/licenses/MIT> */
$.widget("tml.timeLeft",{clock:null,till:null,wanted:{},options:{till:"January 19, 2038 03:14:07",format:"%Y years %M months %W weeks %D days %h hours %m minutes %s seconds remain...",refreshInterval:1e3,complete:function(){alert("It's time!")}},_create:function(){this.till=new Date(this.options.till),this.wanted={years:this.options.format.search("%Y"),months:this.options.format.search("%M"),weeks:this.options.format.search("%W"),days:this.options.format.search("%D"),hours:this.options.format.search("%h"),minutes:this.options.format.search("%m"),seconds:this.options.format.search("%s")},this.refresh()!==!1&&(this.clock=setInterval(this.refresh.bind(this),this.options.refreshInterval))},refresh:function(){var t=new Date,e=(this.till.getTime()-t.getTime())/1e3/60/60/24,s=this.options.format,i=this;if(e>0){if(-1!==this.wanted.years){var o=Math.floor(e/365.25);s=s.replace("%Y",o),e-=365.25*o}if(-1!==this.wanted.months){var r=Math.floor(e/30.4375);s=s.replace("%M",r),e-=30.4375*r}if(-1!==this.wanted.weeks){var a=Math.floor(e/7);s=s.replace("%W",a),e-=7*a}if(-1!==this.wanted.days){var h=Math.floor(e);s=s.replace("%D",h),e-=h}if(-1!==this.wanted.hours){var n=Math.floor(24*e);s=s.replace("%h",n),e-=n/24}if(-1!==this.wanted.minutes){var l=Math.floor(24*e*60);s=s.replace("%m",l),e-=l/24/60}if(-1!==this.wanted.seconds){var f=Math.floor(24*e*60*60);s=s.replace("%s",f)}this.element.html(s)}else this._destroy(),this.options.complete(),i=!1;return i},_destroy:function(){null!==this.clock&&clearInterval(this.clock),this.element.html("")}});